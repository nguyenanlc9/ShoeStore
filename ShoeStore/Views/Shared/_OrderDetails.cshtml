@using ShoeStore.Models.Enums
@model ShoeStore.Models.Order

<div class="container-fluid">
    <div class="row mb-4">
        <div class="col-md-6">
            <h5>Thông tin đơn hàng</h5>
            <p><strong>Mã đơn hàng:</strong> @Model.OrderCode</p>
            <p><strong>Ngày đặt:</strong> @Model.OrderDate.ToString("dd/MM/yyyy HH:mm")</p>
            <p><strong>Trạng thái:</strong> 
                <span class="badge bg-@(Model.Status switch {
                    OrderStatus.Pending => "secondary",
                    OrderStatus.Processing => "info",
                    OrderStatus.Shipped => "primary",
                    OrderStatus.Delivered => "success",
                    OrderStatus.Completed => "success",
                    OrderStatus.Cancelled => "danger",
                    _ => "secondary"
                })">
                    @(Model.Status switch {
                        OrderStatus.Pending => "Chờ xử lý",
                        OrderStatus.Processing => "Đang xử lý",
                        OrderStatus.Shipped => "Đã giao cho vận chuyển",
                        OrderStatus.Delivered => "Đã giao hàng",
                        OrderStatus.Completed => "Hoàn thành",
                        OrderStatus.Cancelled => "Đã hủy",
                        _ => "Không xác định"
                    })
                </span>
            </p>
        </div>
        <div class="col-md-6">
            <h5>Thông tin giao hàng</h5>
            <p><strong>Người nhận:</strong> @Model.OrderUsName</p>
            <p><strong>Số điện thoại:</strong> @Model.PhoneNumber</p>
            <p><strong>Địa chỉ:</strong> @Model.ShippingAddress</p>
        </div>
    </div>

    <div class="table-responsive">
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Sản phẩm</th>
                    <th>Size</th>
                    <th>Số lượng</th>
                    <th>Đơn giá</th>
                    <th>Thành tiền</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.OrderDetails)
                {
                    <tr>
                        <td>
                            <div class="d-flex align-items-center">
                                <img src="@item.Product.ImagePath" alt="@item.Product.Name" style="width: 50px; height: 50px; object-fit: cover;" class="me-2">
                                @item.Product.Name
                            </div>
                        </td>
                        <td>@item.Size.SizeValue</td>
                        <td>@item.Quantity</td>
                        <td>@item.Price.ToString("N0") đ</td>
                        <td>@((item.Price * item.Quantity).ToString("N0")) đ</td>
                    </tr>
                }
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="4" class="text-end"><strong>Tổng tiền:</strong></td>
                    <td><strong>@Model.TotalAmount.ToString("N0") đ</strong></td>
                </tr>
            </tfoot>
        </table>
    </div>

    <div class="row mt-3">
        <div class="col-12">
            <h5>Thông tin thanh toán</h5>
            <p><strong>Phương thức thanh toán:</strong> 
                @(Model.PaymentMethod switch
                {
                    PaymentMethod.COD => "Thanh toán khi nhận hàng",
                    PaymentMethod.VNPay => "VNPay",
                    PaymentMethod.Momo => "Momo",
                    PaymentMethod.ZaloPay => "ZaloPay",
                    PaymentMethod.Visa => "Visa",
                    _ => Model.PaymentMethod.ToString()
                })
            </p>
            <p><strong>Trạng thái thanh toán:</strong>
                <span class="badge bg-@(Model.PaymentStatus switch {
                    PaymentStatus.Pending => "warning",
                    PaymentStatus.Completed => "success",
                    PaymentStatus.Failed => "danger",
                    _ => "secondary"
                })">
                    @(Model.PaymentStatus switch {
                        PaymentStatus.Pending => "Chờ thanh toán",
                        PaymentStatus.Completed => "Đã thanh toán",
                        PaymentStatus.Failed => "Thất bại",
                        _ => "Không xác định"
                    })
                </span>
            </p>
        </div>
    </div>
</div> 